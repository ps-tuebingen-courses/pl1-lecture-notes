<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Continuations: Motivation - Programming Languages I</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Lecture notes for the Programming Languages I lecture at the University of TÃ¼bingen">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../preface.html">Preface</a></li><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../01-intro/intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../02-scala-basics/scala-basics.html"><strong aria-hidden="true">2.</strong> Scala Basics</a></li><li class="chapter-item expanded affix "><li class="part-title">Basic Language Features</li><li class="chapter-item expanded "><a href="../03-arithmetic-expressions/arithmetic-expressions.html"><strong aria-hidden="true">3.</strong> Arithmetic Expressions</a></li><li class="chapter-item expanded "><a href="../04-desugaring/desugaring.html"><strong aria-hidden="true">4.</strong> Desugaring</a></li><li class="chapter-item expanded "><a href="../05-name-binding/name-binding.html"><strong aria-hidden="true">5.</strong> Name Binding</a></li><li class="chapter-item expanded "><a href="../06-first-order-functions/first-order-functions.html"><strong aria-hidden="true">6.</strong> First-Order Functions</a></li><li class="chapter-item expanded "><a href="../07-higher-order-functions/higher-order-functions.html"><strong aria-hidden="true">7.</strong> Higher-Order Functions</a></li><li class="chapter-item expanded "><a href="../08-lazy-evaluation/lazy-evaluation.html"><strong aria-hidden="true">8.</strong> Lazy Evaluation</a></li><li class="chapter-item expanded "><a href="../09-recursive-functions/recursive-functions.html"><strong aria-hidden="true">9.</strong> Recursive Functions</a></li><li class="chapter-item expanded "><a href="../10-mutation/mutation.html"><strong aria-hidden="true">10.</strong> Mutation</a></li><li class="chapter-item expanded affix "><li class="part-title">Miscellaneous</li><li class="chapter-item expanded "><a href="../11-garbage-collection/garbage-collection.html"><strong aria-hidden="true">11.</strong> Garbage Collection</a></li><li class="chapter-item expanded "><a href="../12-meta-interpretation/meta-interpretation.html"><strong aria-hidden="true">12.</strong> Syntactic and Meta-Interpretation</a></li><li class="chapter-item expanded "><a href="../13-church-encoding/church-encoding.html"><strong aria-hidden="true">13.</strong> Church Encodings</a></li><li class="chapter-item expanded "><a href="../14-object-algebras/object-algebras.html"><strong aria-hidden="true">14.</strong> Object Algebras</a></li><li class="chapter-item expanded affix "><li class="part-title">Continuations</li><li class="chapter-item expanded "><a href="../15-continuations-1/continuations-1.html" class="active"><strong aria-hidden="true">15.</strong> Continuations: Motivation</a></li><li class="chapter-item expanded "><a href="../16-continuations-2/continuations-2.html"><strong aria-hidden="true">16.</strong> Continuations: Definition</a></li><li class="chapter-item expanded "><a href="../17-first-class-continuations/first-class-continuations.html"><strong aria-hidden="true">17.</strong> First-Class Continuations</a></li><li class="chapter-item expanded "><a href="../18-letcc/letcc.html"><strong aria-hidden="true">18.</strong> Call-with-current-continuation</a></li><li class="chapter-item expanded "><a href="../19-shift-reset/shift-reset.html"><strong aria-hidden="true">19.</strong> Delimited Continuations</a></li><li class="chapter-item expanded affix "><li class="part-title">Monads</li><li class="chapter-item expanded "><a href="../20-monads-intro/monads-intro.html"><strong aria-hidden="true">20.</strong> Monads Intro</a></li><li class="chapter-item expanded "><a href="../21-io-monad/io-monad.html"><strong aria-hidden="true">21.</strong> The IO Monad</a></li><li class="chapter-item expanded "><a href="../22-modular-interpreters/modular-interpreters.html"><strong aria-hidden="true">22.</strong> Modular Interpreters</a></li><li class="chapter-item expanded "><a href="../23-monadic-reflection/monadic-reflection.html"><strong aria-hidden="true">23.</strong> Monadic Reflection</a></li><li class="chapter-item expanded affix "><li class="part-title">Program Transformations</li><li class="chapter-item expanded "><a href="../24-defunctionalization/defunctionalization.html"><strong aria-hidden="true">24.</strong> Defunctionalization, Refunctionalization</a></li><li class="chapter-item expanded affix "><li class="part-title">Type Systems</li><li class="chapter-item expanded "><a href="../25-type-systems/type-systems.html"><strong aria-hidden="true">25.</strong> Type Systems</a></li><li class="chapter-item expanded "><a href="../26-stlc/stlc.html"><strong aria-hidden="true">26.</strong> Simply Typed Lambda Calculus (STLC)</a></li><li class="chapter-item expanded "><a href="../27-type-inference/type-inference.html"><strong aria-hidden="true">27.</strong> Type Inference</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Programming Languages I</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ps-tuebingen-courses/pl1-lecture-notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ps-tuebingen-courses/pl1-lecture-notes/blob/master/src/15-continuations-1/continuations-1.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="continuations-motivation"><a class="header" href="#continuations-motivation">Continuations: Motivation</a></h1>
<p>The content of this chapter is available as a Scala file <a href="./continuations-1.scala">here.</a></p>
<p>Consider the following very simple program:</p>
<pre><code class="language-scala">def inputNumber(prompt: String): Int = {
  println(prompt)
  Integer.parseInt(readLine())
}
def progSimple = {
  println(inputNumber(&quot;First number:&quot;) + inputNumber(&quot;Second number&quot;))
}
</code></pre>
<p>Now consider a web version of the program:</p>
<ul>
<li>the first number is entered on the first page</li>
<li>then the first number is submitted, a form to enter the second number is shown</li>
<li>when the second number is submitted, a form with the result is generated and shown.</li>
</ul>
<p>Even this &quot;addition server&quot; is difficult to implement. Because http is a stateless protocol (for good reasons),
every web program is basically forced to terminate after every request. This means that
the Web developer must turn this application into three programs:</p>
<ol>
<li>The first program displays the first form.</li>
<li>The second program consumes the form values from the first form, and generates the second form.</li>
<li>The third program consumes the form values from the second form, computes the output, and generates the result.</li>
</ol>
<p>Because the value entered in the first form is needed by the third program to compute its output, this
value must somehow be transmitted from the first program to the third. This is typically done
by using the hidden field mechanism of HTML.</p>
<p>Suppose, instead of using a hidden field, the application developer used a Java Servlet session object,
or a database field, to store the first number. (Application developers are often pushed to do this
because that is the feature most conveniently supported by the language and API they are employing.)
Then, if the developer were to exploratorily open multiple windows
the application can compute the wrong answer.
Hence, the actual program in a web developer's mind has the structure of the following program.
An actual web program is of course more complicated, but this primitive model of web
programming is sufficient to explain the problem.</p>
<pre><code class="language-scala">// we use the return type &quot;Nothing&quot; for functions that will never return (normally)
def webdisplay(s: String): Nothing = {
  println(s)
  sys.error(&quot;program terminated&quot;)
}

def webread(prompt: String, continue: String): Nothing = {
  println(prompt)
  println(&quot;send input to: &quot; + continue)
  sys.error(&quot;program terminated&quot;)
}

def program1 = webread(&quot;enter first number&quot;, &quot;s2&quot;)
def program2(n1: Int) = webread(&quot;enter second number and remind me of previoulsy entered number &quot; + n1, &quot;s3&quot;)
def program3(n1: Int, n2: Int) = webdisplay(&quot;The sum of &quot; + n1 + &quot; and &quot; + n2 + &quot; is &quot; + (n1 + n2))
</code></pre>
<p>We could write a better <code>webread</code> and <code>webdisplay</code> procedure if we could somehow get hold of the
pending computation at the time when the procedure was invoked. Such a pending computation is
called <em>continuation</em>.</p>
<p>Let's consider the continuation at the point of the first interaction in the original program,</p>
<pre><code class="language-scala">def prog = {
  println(inputNumber() + inputNumber())
}
</code></pre>
<p>The pending computation (or, continuation in the following) is to take the result of the first
<code>inputNumber</code> invocation, add to it the result of the second invocation, and display it.</p>
<p>We can express the continuation as a function:</p>
<pre><code class="language-scala">val cont1 = (n: Int) =&gt; println(n + inputNumber(&quot;Second number&quot;))
</code></pre>
<p>Similarly, the continuation at the second point of interaction is:</p>
<pre><code class="language-scala">val cont2 = (m: Int) =&gt; println(n + m)
</code></pre>
<p>where <code>n</code> is the result of the first input, which is stored in the closure of <code>cont2</code>.</p>
<p>Assuming an explicit representation of the continuation, it is obvious that we can now
write a version of <code>webread</code>, called <code>webread_k</code>, which takes the continuation as second parameter and invokes
the continuation once the answer to the result is received by the server.
This can be implemented, say, by associating to a continuation a unique ID, store the continuation
in a hashmap on the server using this ID, and storing the ID in the form such that it gets
submitted back to the server once the client presses the submit button.</p>
<p>Here is code illustrating the idea. For simplicity we assume that all web forms return
a single integer value.</p>
<pre><code class="language-scala">val continuations = new scala.collection.mutable.HashMap[String, Int =&gt; Nothing]()
var nextIndex: Int = 0
def getNextID = {
  nextIndex += 1
  &quot;c&quot; + nextIndex
}

def webread_k(prompt: String, k: Int =&gt; Nothing): Nothing = {
  val id = getNextID
  continuations += (id -&gt; k)
  println(prompt)
  println(&quot;to continue, invoke continuation: &quot; + id)
  sys.error(&quot;program terminated&quot;)
}

def continue(kid: String, result: Int) = continuations(kid)(result)
</code></pre>
<p>Using <code>webread_k</code>, we can now define our addition server as follows.
If you try <code>webprog</code>, ignore the stack traces.</p>
<pre><code class="language-scala">def webprog = webread_k(&quot;enter first number&quot;, (n) =&gt;
                webread_k(&quot;enter second number&quot;, (m) =&gt;
                  webdisplay(&quot;The sum of &quot; + n + &quot; and &quot; + m + &quot; is &quot; + (n + m))))
</code></pre>
<p>For instance, try:</p>
<pre><code>scala&gt; webprog            -- yields some continuation id &quot;c1&quot;
scala&gt; continue(&quot;c1&quot;, 5)  -- yields some continuation id &quot;c2&quot;
scala&gt; continue(&quot;c2&quot;, 7)
</code></pre>
<p>This should yield the result 12 as expected. But also try:</p>
<pre><code>scala&gt; webprog            -- yields some continuation id &quot;c1&quot;
scala&gt; continue(&quot;c1&quot;, 5)  -- yields some continuation id &quot;c2&quot;
scala&gt; continue(&quot;c1&quot;, 6)  -- yields some continuation id &quot;c3&quot;
scala&gt; continue(&quot;c2&quot;, 3)  -- should yield 8
scala&gt; continue(&quot;c3&quot;, 3)  -- should yield 9
</code></pre>
<p>The style of programming in <code>webprog</code>, which is obviously more complicated than the logical
structure of <code>progSimple</code>, shows up in many practical programming scenarios - server-side web programming
is just one of them. For instance, in JavaScript many API functions for asynchronous communication
such as httprequest in AJAX require to pass a callback function, which leads to similar code
as the one in <code>webprog</code> above.</p>
<p>Let's consider this &quot;web transformation&quot; - the transformation from <code>progSimple</code> to <code>webprog</code> - in more detail.
To this end, let's make our application a bit more sophisticated. Instead of entering only two
numbers, the user enters n numbers, e.g., the prices of a list of n items.</p>
<p>Here is the &quot;non-web&quot; version of the application:</p>
<pre><code class="language-scala">def allCosts(itemList: List[String]): Int = itemList match {
   case Nil =&gt; 0
   case x :: rest =&gt; inputNumber(&quot;Cost of item &quot; + x + &quot;:&quot;) + allCosts(rest)
}
</code></pre>
<pre><code class="language-scala">val testData: List[String] = List(&quot;banana&quot;, &quot;apple&quot;, &quot;orange&quot;)

def test = println(&quot;Total sum: &quot; + allCosts(testData))
</code></pre>
<p>This version of <code>allCosts</code> is clearly not web-friendly, because it uses <code>inputNumber</code>,
which we do not know how to implement for the web.</p>
<p>The first thing to observe is that on its own, <code>allCosts</code> is not a complete program: it doesn't do anything unless
it is called with actual arguments!
Instead, it is a library procedure that may be used in many different contexts. Because it has a web interaction,
however, there is the danger that at the point of interaction, the rest of the computation -- that is, the
computation that invoked <code>allCosts</code> -- will be lost. To prevent this, <code>allCosts</code> must consume an extra argument,
a continuation, that represents the rest of the pending computation. To signify this change in contract, we will use
the convention of appending <code>_k</code> to the name of the procedure and <code>k</code> to name the continuation parameter.</p>
<p>Here is a first attempt to define <code>allCosts_k</code>.</p>
<pre><code class="language-scala"> def allCosts_k(itemList: List[String], k: Int =&gt; Nothing): Nothing = itemList match {
   case Nil =&gt; 0
   case x :: rest =&gt; webread_k(&quot;Cost of item &quot; + x + &quot;:&quot;, n =&gt; n + allCosts_k(rest, k))
}
</code></pre>
<p>This may look reasonable, but it suffers from an immediate problem. When the recursive call occurs, if
the list had two or more elements, then there will immediately be another web interaction. Because this will
terminate the program, the pending addition will be lost! Therefore, the addition of <code>n</code> has to move into the
continuation fed to <code>allCosts_k</code>. In code:</p>
<pre><code class="language-scala">def allCosts_k(itemList: List[String], k: Int =&gt; Nothing): Nothing = itemList match {
   case Nil =&gt; 0
   case x :: rest =&gt; webread_k(&quot;Cost of item &quot; + x + &quot;:&quot;, n =&gt; allCosts_k(rest, m =&gt; k(m + n)))
}
</code></pre>
<p>That is, the receiver of the web interaction is invoked with the cost of the first item. When <code>allCosts_k</code> is invoked
recursively, it is applied to the rest of the list. Its receiver must therefore receive the tally of costs of the
remaining items. That explains the pattern in the receiver.</p>
<p>The only problem is, where does a continuation ever get a value? We create larger-and-larger continuations on
each recursive invocation, but what ever invokes them?</p>
<p>Here is the same problem from a different angle (that also answers the question above). Notice that each
recursive invocation of <code>allCosts_k</code> takes place in the aftermath of a web interaction. We have already seen how
the act of web interaction terminates the pending computation. Therefore, when the list empties, where
is the value 0 going? Presumably to the pending computation, but there is none. Any computation that
would have been pending has now been recorded in <code>k</code>, which is expecting a value. Therefore, the correct
transformation of this procedure is:</p>
<pre><code class="language-scala">def allCosts_k(itemList: List[String], k: Int =&gt; Nothing): Nothing = itemList match {
   case Nil =&gt; k(0)
   case x :: rest =&gt; webread_k(&quot;Cost of item &quot; + x + &quot;:&quot;, n =&gt; allCosts_k(rest, m =&gt; k(m + n)))
}

def testweb = allCosts_k(testData, m =&gt; webdisplay(&quot;Total sum: &quot; + m))
</code></pre>
<p>Let's now consider the case that we have used a library function for the iteration in <code>allCosts</code>, namely
the <code>map</code> function, which we replicate here.</p>
<pre><code class="language-scala">def map[S, T](c: List[S], f: S =&gt; T): List[T] = c match {
  case Nil =&gt; Nil
  case x :: rest =&gt; f(x) :: map(rest, f)
}
</code></pre>
<p>Using <code>map</code>, we can rephrase <code>allCosts</code> as follows.</p>
<pre><code class="language-scala">def allCosts2(itemList: List[String]): Int =
  map(itemList, (x: String) =&gt; inputNumber(&quot;Cost of item &quot; + x + &quot;:&quot;)).sum
</code></pre>
<p>What if we we want to use <code>map</code> in <code>allCosts_k</code>?</p>
<p>Just using <code>webread_k</code> in place of <code>inputNumber</code> will not work, since <code>webread_k</code> expects an additional parameter.
Obviously we must somehow modify the definition of <code>map</code>. But what can we pass as second parameter in the call
to <code>f</code>?</p>
<p><strong>Insight</strong>: We must perform the &quot;web transformation&quot; to <code>map</code> as well. We call the result <code>map_k</code>. Here is the code:</p>
<pre><code class="language-scala">def map_k[S, T](c: List[S], f: (S, T =&gt; Nothing) =&gt; Nothing, k: List[T] =&gt; Nothing): Nothing = c match {
   case Nil =&gt; k(Nil)
   case x :: rest =&gt; f(x, t =&gt; map_k(rest, f, (tr: List[T]) =&gt; k(t :: tr)))
}

def allCosts2_k(itemList: List[String], k: Int =&gt; Nothing): Nothing =
   map_k(itemList,
         (x: String, k2: Int =&gt; Nothing) =&gt;
           webread_k(&quot;Cost of item &quot; + x + &quot;:&quot;, k2),
         (l: List[Int]) =&gt; k(l.sum))
</code></pre>
<h2 id="implications-of-the-web-transformation"><a class="header" href="#implications-of-the-web-transformation">Implications of the &quot;web transformation&quot;:</a></h2>
<ol>
<li>
<p>We had to make decisions about the order of evaluation. That is, we had to choose whether
to evaluate the left or the right argument of addition first. This was an issue we had specified only
implicitly earlier; if our evaluator had chosen to evaluate arguments right-to-left, the web program at
the beginning of this document would have asked for the second argument before the first! We have
made this left-to-right order of evaluation explicit in our transformation.</p>
</li>
<li>
<p>The transformation we use is global, namely it (potentially) affects all the procedures in the program
by forcing them all to consume an extra continuation as an argument. We usually don't have a choice as
to whether or not to transform a procedure. Suppose <code>f</code> invokes <code>g</code> and <code>g</code> invokes <code>h</code>, and we transform
<code>f</code> to <code>f_k</code> but don't transform <code>g</code> or <code>h</code>. Now when <code>f_k</code> invokes <code>g</code> and <code>g</code> invokes <code>h</code>, suppose <code>h</code> consumes
input from the web. At this point the program terminates, but the last continuation procedure (necessary
to resume the computation when the user supplies an input) is the one given to <code>f_k</code>, with all record of
<code>g</code> and <code>h</code> lost.</p>
</li>
<li>
<p>This transformation sequentializes the program. Given a nested expression, it forces the programmer
to choose which sub-expression to evaluate first (a consequence of the first point above); further, every
subsequent operation lies in the continuation, which in turn picks the first expression to evaluate, pushing
all other operations into its continuation; and so forth. The net result is a program that looks an awful lot
like a traditional procedural program. This suggests that this series of transformations can be used to
compile a program in a language like Scheme into one in a language like C!</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../14-object-algebras/object-algebras.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../16-continuations-2/continuations-2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../14-object-algebras/object-algebras.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../16-continuations-2/continuations-2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../questionnaire.js"></script>
    </body>
</html>
